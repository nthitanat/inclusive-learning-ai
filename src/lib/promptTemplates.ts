import { ChatPromptTemplate } from "@langchain/core/prompts";

// Define all prompt templates
export const prompts = {
  curriculum: ChatPromptTemplate.fromMessages([
    ["system", `คุณคือผู้เชี่ยวชาญด้านหลักสูตรการศึกษาไทย ที่มีความเข้าใจลึกในการเชื่อมโยงตัวชี้วัดกับเนื้อหาการเรียนรู้

วิธีการทำงาน:
1. วิเคราะห์เนื้อหาที่ให้มาแบบละเอียด
2. ค้นหาตัวชี้วัดที่เกี่ยวข้องทั้งทางตรงและทางอ้อม
3. ให้ความสำคัญกับตัวชี้วัดที่สามารถนำไปใช้จริงได้
4. **ข้อมูลทั้งหมดต้องมาจาก row เดียวกันในฐานข้อมูลเท่านั้น**
5. ตอบในรูปแบบ JSON ภาษาไทยเท่านั้น`],
    ["human", `จากข้อมูลหลักสูตร: {context}

**กลุ่มสาระ**: {subject}
**หัวข้อบทเรียน**: {lessonTopic}  
**ระดับชั้น**: {level}

ตอบในรูปแบบ JSON:
{{
  "กลุ่มสาระการเรียนรู้": "...",
  "มาตรฐาน": "...", 
  "ตัวชี้วัดระหว่างทาง": "...",
  "ตัวชี้วัดปลายทาง": "...",
  "เหตุผลการเลือก": "..."
}}`]
  ]),

  contentAndSummary: ChatPromptTemplate.fromMessages([
    ["system", "คุณคือผู้เชี่ยวชาญด้านการศึกษา ตอบเป็น JSON เท่านั้น"],
    ["human", `จากมาตรฐาน: {standard}
ตัวชี้วัดระหว่างทาง: {interimIndicators}
ตัวชี้วัดปลายทาง: {finalIndicators}

ทำงาน 2 งานพร้อมกัน:
1. คิดหัวข้อสาระการเรียนรู้แบบละเอียด (field: "สาระการเรียนรู้")
2. สรุปสาระสำคัญแบบละเอียด (field: "สาระสำคัญ")

ตอบในรูปแบบ JSON:
{{
  "สาระการเรียนรู้": {{"1": "...", "2": "...", "3": "..."}},
  "สาระสำคัญ": "..."
}}`]
  ]),

  objectives: ChatPromptTemplate.fromMessages([
    ["system", "คุณคือผู้เชี่ยวชาญด้านการออกแบบการเรียนรู้ ตอบเป็น JSON เท่านั้น"],
    ["human", `ออกแบบจุดประสงค์การเรียนรู้ 3 ด้าน:
วิชา: {subject}
เนื้อหา: {content}
ระดับชั้น: {level}
ตัวชี้วัดระหว่างทาง: {interimIndicators}
ตัวชี้วัดปลายทาง: {finalIndicators}

ตอบในรูปแบบ JSON:
{{
  "จุดประสงค์ด้านความรู้": ["...", "..."],
  "จุดประสงค์ด้านทักษะ": ["...", "..."], 
  "จุดประสงค์ด้านคุณลักษณะ": ["...", "..."]
}}`]
  ]),

  lessonPlanAndMaterials: ChatPromptTemplate.fromMessages([
    ["system", "คุณคือผู้เชี่ยวชาญด้านการออกแบบกระบวนการจัดการเรียนรู้ UDL และ Inclusive Education ตอบเป็น JSON เท่านั้น"],
    ["human", `ออกแบบบกระบวนการจัดการเรียนรู้แบบ UDL โดยคำนึงถึงความแตกต่างของนักเรียนแต่ละประเภทในห้อง (Inclusive Classroom)
โดยคุณจะต้องค้นหาความรู้เชิงลึกเกี่ยวกับเนื้อหาของบทเรียนนั้นๆ เพื่อใช้ในการออกแบบกิจกรรมการเรียนรู้ที่เหมาะสม
ให้ตอบกลับในรูปแบบ JSON โดยใช้ลำดับหัวข้อเริ่มจาก 8 และลงลึกตามกิจกรรม เช่น 8.1, 8.1.1 ฯลฯ

**ข้อมูลอินพุต:**
- เนื้อหา: {content}
- จำนวนชั่วโมงทั้งหมดในการสอน: ({studyPeriod} ชั่วโมง)
- จำนวนนักเรียน: {numStudents} คน
- ประเภทนักเรียน: {studentTypes}

**ห้ามใช้กิจกรรมง่ายเกินไป** เช่น วาดภาพ/จับคู่คำศัพท์ เว้นแต่มีความเกี่ยวโยงกับการวิเคราะห์หรือออกแบบทางวิทยาศาสตร์จริง
**ทุกกิจกรรมต้องสอดคล้องกับสาระและตัวชี้วัด** และมีเป้าหมายที่ระดับวิเคราะห์ ประเมินค่า หรือสร้างสรรค์ ตาม Bloom's Taxonomy

**การจัดโครงสร้างกิจกรรม:**
- สามารถมีได้หลายขั้นตอนตามความเหมาะสม
- จำนวนขั้นตอนย่อย: ความซับซ้อนของเนื้อหา, เวลาที่มี, และความหลากหลายของนักเรียน
- ระบุเวลาของแต่ละขั้นตอนให้ครบ {totalMinutes} นาทีรวมกัน

**โครงสร้าง JSON ที่ถูกต้อง - ต้องเป็นแบบ NESTED หรือซ้อนกัน:**
{{
  "กิจกรรมการเรียนรู้": {{
            "8.1 ชื่อขั้นตอนหลักที่ 1 (X นาที)": {{
                    "1 ชื่อขั้นตอนย่อยที่1 (X นาที)" : {{
                             รายละเอียดการดำเนินการ,
                             สื่อ/อุปกรณ์การสอน,
                             บทบาทผู้เรียน,
                             บทบาทครู,
                             แนวทางการปรับกิจกรรมสำหรับผู้เรียนที่หลากหลาย: {{
                                "1 ประเภทนักเรียนที่1": "วิธีการปรับกิจกรรม",
                                "2 ประเภทนักเรียนที่2": "วิธีการปรับกิจกรรม"
                            }}
                            
                    }}
                    "2 ชื่อขั้นตอนย่อยที่2 (X นาที)" : {{
                             รายละเอียดการดำเนินการ,
                             สื่อ/อุปกรณ์การสอน,
                             บทบาทผู้เรียน,
                             บทบาทครู,
                             แนวทางการปรับกิจกรรมสำหรับผู้เรียนที่หลากหลาย: {{
                                "1 ชื่อประเภทนักเรียนที่1": "วิธีการปรับกิจกรรม",
                                "2 ชื่อประเภทนักเรียนที่2": "วิธีการปรับกิจกรรม"
                            }}
                    }}
            }},
            "8.2 ชื่อขั้นตอนหลักที่ 2 (X นาที)": {{
                    "1 ชื่อขั้นตอนย่อยที่1 (X นาที)" : {{
                             รายละเอียดการดำเนินการ,
                             สื่อ/อุปกรณ์การสอน,
                             บทบาทผู้เรียน,
                             บทบาทครู,
                             แนวทางการปรับกิจกรรมสำหรับผู้เรียนที่หลากหลาย: {{
                                "1 ประเภทนักเรียนที่1": "วิธีการปรับกิจกรรม",
                                "2 ประเภทนักเรียนที่2": "วิธีการปรับกิจกรรม"
                            }}
                            
                    }}
                    "2 ชื่อขั้นตอนย่อยที่2 (X นาที)" : {{
                             รายละเอียดการดำเนินการ,
                             สื่อ/อุปกรณ์การสอน,
                             บทบาทผู้เรียน,
                             บทบาทครู,
                             แนวทางการปรับกิจกรรมสำหรับผู้เรียนที่หลากหลาย: {{
                                "1 ประเภทนักเรียนที่1": "วิธีการปรับกิจกรรม",
                                "2 ประเภทนักเรียนที่2": "วิธีการปรับกิจกรรม"
                            }}
                    }}
            }},
            "8.3 ชื่อขั้นตอนหลักที่ 3 (X นาที)": [...],
             ...,
            "8.x ... : [...]
  }},
  "สื่อและอุปกรณ์": {{
    "1": "รายการสื่อและอุปกรณ์ที่ใช้ในกิจกรรม",
    "2": "เทคโนโลยีและแอปพลิเคชันที่ใช้",
    "3": "วัสดุสำหรับการทดลองหรือกิจกรรมสร้างสรรค์"
  }}
}}

ให้คิดอย่างสร้างสรรค์และปรับตามบริบทที่ได้รับ!`]
  ]),

  evaluation: ChatPromptTemplate.fromMessages([
    ["system", "คุณคือผู้เชี่ยวชาญด้านการวัดและประเมินผล ตอบเป็น JSON เท่านั้น"],
    ["human", `ออกแบบกระบวนการวัดและประเมินผลการเรียนรู้สำหรับแผนการจัดกิจกรรมการเรียนรู้ต่อไปนี้:
                              {lessonPlan}

                              โดยต้องสอดคล้องกับตัวชี้วัดระหว่างทาง: {interimIndicators}

                              **คำแนะนำ**: 
                              - แบ่งรายละเอียดเป็น 3 ส่วนหลักในรูปแบบ JSON:
                                1. "วิธีวัดและประเมินผล" (แบ่งเป็น: วัดความรู้, วัดทักษะและกระบวนการ, วัดคุณลักษณะ, การประเมินสมรรถนะสำคัญ)
                                2. "เครื่องมือที่ใช้วัดและประเมินผล" (เช่น แบบทดสอบ, แบบสังเกต, แบบประเมินตนเอง ฯลฯ)
                                3. "เกณฑ์การวัดและประเมินผล" (เช่น แบบทดสอบวัดความรู้ ให้ระบุเกณฑ์คะแนนแต่ละด้าน รวมกันต้องได้ 100%)

                                -วิธีวัดและประเมินผล
                                  -วัดความรู้
                                  -วัดทักษะและกระบวนการ
                                  -วัดคุณลักษณะ
                                  -การประเมินสมรรถนะสำคัญ                                
                                -เครื่องมือที่ใช้วัดและประเมินผล                        
                                -เกณฑ์การวัดและประเมินผล
                                  -รูปแบบการประเมิน (1-5 แบบเช่น แบบทดสอบวัดความรู้, แบบฝึกหัดทบทวนท้ายบทเรียน เป็นต้น )
                                    -ระบุคะแนนเต็มของแต่ละรูปแบบ
                                    -ระบุเกณฑ์ย่อยของแต่ละรูปแบบ
                                    -รวมทุกรูปแบบ"ต้องได้ "100%" โดยอาจให้น้ำหนักแต่ละรูปแบบแตกต่างกันได้
                         
                              ตอบกลับเป็น JSON เท่านั้น
        `]
  ])
};
